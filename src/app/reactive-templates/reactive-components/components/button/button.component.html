<ng-container [ngSwitch]="variantMap().cardPortrait">
  <!-- Default variant -->
  <ion-button
    *ngSwitchDefault
    [class]="'full standard medium' + ' ' + params.style.value() + ' ' + params.buttonAlign.value()"
    [disabled]="params.disabled.value()"
    (click)="handleClick()"
    [attr.data-param-style]="params.style.value()"
    [attr.data-variant]="params.variant.value()"
    [attr.data-has-children]="row().rows ? true : null"
    [attr.data-language-direction]="templateTranslateService.languageDirection()"
    [attr.data-icon-align]="params.iconAlign.value()"
    [attr.data-test]="name()"
  >
    @if (params.icon.value() && params.iconAlign.value() === "left") {
      <ion-icon slot="start" [src]="params.icon.value() | plhAsset"></ion-icon>
    }
    @if (params.icon.value() && params.iconAlign.value() === "right") {
      <ion-icon slot="end" [src]="params.icon.value() | plhAsset"></ion-icon>
    }
    @if (params.iconSecondary.value()) {
      <!-- HACK: support icon being a path to an asset or assume it is the name of an ion-icon (e.g. chevron-forward) -->
      @if (params.iconSecondary.value().includes(".")) {
        <ion-icon slot="end" [src]="params.iconSecondary.value() | plhAsset"></ion-icon>
      } @else {
        <ion-icon slot="end" [name]="params.iconSecondary.value()"></ion-icon>
      }
    }
    <span
      *ngIf="value()"
      [class]="'text ' + params.textAlign.value()"
      [innerHTML]="value() | markdown"
    >
    </span>
    <span *ngIf="row().rows" class="children">
      <p>TODO: implement this.</p>

      <!-- <plh-template-component
        
        [row]="childRow"
        [parent]="parent"
        [attr.data-rowname]="_row.name"
      ></plh-template-component> -->
    </span>
  </ion-button>

  <!-- "card-portrait" variant. This variant is not achievable using an ion-button -->
  <div
    *ngSwitchCase="true"
    class="button-container"
    (click)="handleClick()"
    [attr.data-variant]="params.variant.value()"
    [attr.data-has-children]="row().rows ? true : null"
    [attr.data-disabled]="params.disabled.value()"
  >
    <img *ngIf="params.image.value()" src="{{ params.image.value() | plhAsset }}" />
    <div *ngIf="value()" [class]="'button-text ' + params.textAlign.value()">
      {{ value() }}
    </div>
    <span *ngIf="row().rows" class="children">
      <p>TODO: implement this.</p>
      <!-- <plh-template-component
        *ngFor="let childRow of _row.rows | filterDisplayComponent; trackBy: trackByRow"
        class="child"
        [row]="childRow"
        [parent]="parent"
        [attr.data-rowname]="_row.name"
      ></plh-template-component> -->
    </span>
  </div>
</ng-container>
