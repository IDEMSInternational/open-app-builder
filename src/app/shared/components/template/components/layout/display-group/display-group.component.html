@if (params.sticky) {
  <!-- Sticky display group - includes placeholder padding elements above/below main content -->
  @if (params.sticky === "top") {
    <div [style.height.px]="sticky.height()"></div>
  }
  <tmpl-display-group-sticky [position]="params.sticky" #sticky="tmplDisplayGroupSticky">
    <ng-container *ngTemplateOutlet="content"></ng-container>
  </tmpl-display-group-sticky>
  @if (params.sticky === "bottom") {
    <div [style.height.px]="sticky.height()"></div>
  }
} @else {
  <!-- Regular display group - render templated content -->
  <ng-container *ngTemplateOutlet="content"></ng-container>
}

<!-- Main Content - shown either within sticky or standard versions -->
<ng-template #content>
  <!--  -->
  <div
    (click)="clickDisplayGroup()"
    class="display-group-wrapper"
    [attr.data-param-style]="params.style"
    [attr.data-rowname]="_row.name"
    [attr.data-variant]="params.variant"
    [style.marginBottom.px]="params.offset"
    [style]="_row.style_list | styleList"
    [ngStyle]="backgroundImageStyles"
  >
    @switch (type) {
      <!-- Default Layout -->
      @default {
        @for (childRow of _row.rows | filterDisplayComponent; track trackByRow($index, childRow)) {
          <plh-template-component
            [row]="childRow"
            [parent]="parent"
            [attr.data-rowname]="_row.name"
          >
          </plh-template-component>
        }
      }
      <!-- Dashed-box -->
      @case ("dashed_box") {
        <plh-advanced-dashed-box
          [inputRow]="_row"
          [parent]="parent"
          style="flex: 1"
        ></plh-advanced-dashed-box>
      }
      <!-- Form layout -->
      @case ("form") {
        <plh-tmpl-form [inputRow]="_row" [parent]="parent"></plh-tmpl-form>
      }
    }
  </div>
</ng-template>
