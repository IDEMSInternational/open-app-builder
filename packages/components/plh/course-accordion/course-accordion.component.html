<div class="course-accordion-container" [attr.data-locked]="params().locked">
  <div class="course-button">
    <div class="course-title-and-progress-bar">
      <p class="course-title">{{ courseTitle() }}</p>
      <div class="progress-bar-container">
        <plh-task-progress-bar
          [showText]="false"
          [inputProgressPercent]="progressPercent()"
        ></plh-task-progress-bar>
        <div class="progress-bar-text">
          <p>{{ `${lessonCompleted()}/${lessonTotal()} lessons` }}</p>
        </div>
      </div>
    </div>
    <div class="course-button-icon">
      @if (params().locked) {
        <ion-icon name="lock-closed-outline"></ion-icon>
      } @else {
        @if (isOpen()) {
          <ion-icon name="chevron-up-circle-outline"></ion-icon>
        } @else {
          <ion-icon name="chevron-down-circle-outline"></ion-icon>
        }
      }
    </div>
  </div>

  <div class="lessons-container">
    <p class="lessons-header">{{ params().lessonsTitle }}</p>
    @for (lesson of lessonDataRows(); track lesson.id) {
      <div class="lesson-row">
        <plh-lesson-button
          [completed]="lesson.completed"
          [highlighted]="lesson.highlighted"
          [title]="lesson.title"
          [locked]="lesson.locked"
        ></plh-lesson-button>
      </div>
    }
  </div>
</div>
