<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
        <link rel="stylesheet" href="../styles/material.css">
    </head>
    <body>
          <script>
               // Blocking script to avaoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);

               if ($darkModeToggles.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">frontend documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  ITaskProgressBarParams</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/components/template/components/task-progress-bar/task-progress-bar.component.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#completedColumnName" 
>
                                            completedColumnName
                                        </a>
                                </li>
                                <li>
                                        <a href="#completedField" 
>
                                            completedField
                                        </a>
                                </li>
                                <li>
                                        <a href="#completedFieldColumnName" 
>
                                            completedFieldColumnName
                                        </a>
                                </li>
                                <li>
                                        <a href="#dataListName" 
>
                                            dataListName
                                        </a>
                                </li>
                                <li>
                                        <a href="#progressUnitsName" 
>
                                            progressUnitsName
                                        </a>
                                </li>
                                <li>
                                        <a href="#showText" 
>
                                            showText
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="completedColumnName"></a>
                                        <span class="name "><b>completedColumnName</b>
                                            <a href="#completedColumnName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>completedColumnName:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>TEMPLATE PARAMETER: completed_column_name.
The name of the column in the source data list that tracks the completed value of each subtask.
If there is no column with this name, the component will look for a column matching completed_field_column_name,
and use the corresponding app fields to track the completion status of subtasks.
Deafult &quot;completed&quot;</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="completedField"></a>
                                        <span class="name "><b>completedField</b>
                                            <a href="#completedField">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>completedField:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>TEMPLATE PARAMETER: completed_field.
The name of the field that stores the completion status of the task group</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="completedFieldColumnName"></a>
                                        <span class="name "><b>completedFieldColumnName</b>
                                            <a href="#completedFieldColumnName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>completedFieldColumnName:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>TEMPLATE PARAMETER: completed_field_column_name.
The name of the column in the source data list which stores the name of the completed field of each subtask.
The app fields corresponding to the values in this column are used to evaluate the completion of subtasks iff the
completed_column_name column is not present. In this case, the task progress bar will not update without a page reload.
Deafult &quot;completed_field&quot;</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="dataListName"></a>
                                        <span class="name "><b>dataListName</b>
                                            <a href="#dataListName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>dataListName:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>TEMPLATE PARAMETER: task_group_data.
The name of the task group to track the progress of (through the completion of its subtasks)</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="progressUnitsName"></a>
                                        <span class="name "><b>progressUnitsName</b>
                                            <a href="#progressUnitsName">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>progressUnitsName:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>TEMPLATE PARAMETER: progress_units_name.
The displayed name of the units of progress associated with
the constituent tasks of the task group.
Default &quot;sections&quot;</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="showText"></a>
                                        <span class="name "><b>showText</b>
                                            <a href="#showText">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>showText:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>TEMPLATE PARAMETER: show_text.
Show the text associated with progress bar, e.g. &quot;8 sections&quot;
Default false</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
  ChangeDetectionStrategy,
  ChangeDetectorRef,
  Component,
  EventEmitter,
  Input,
  OnDestroy,
  OnInit,
  Output,
} from &quot;@angular/core&quot;;
import { TaskService } from &quot;src/app/shared/services/task/task.service&quot;;
import {
  getBooleanParamFromTemplateRow,
  getStringParamFromTemplateRow,
} from &quot;src/app/shared/utils&quot;;
import { TemplateBaseComponent } from &quot;../base&quot;;
import { IProgressStatus } from &quot;src/app/shared/services/task/task.service&quot;;
import { Subscription, debounceTime } from &quot;rxjs&quot;;
import { DynamicDataService } from &quot;src/app/shared/services/dynamic-data/dynamic-data.service&quot;;

interface ITaskProgressBarParams {
  /**
   * TEMPLATE PARAMETER: task_group_data.
   * The name of the task group to track the progress of (through the completion of its subtasks)
   */
  dataListName: string;
  /**
   * TEMPLATE PARAMETER: completed_field.
   * The name of the field that stores the completion status of the task group
   */
  completedField: string;
  /**
   * TEMPLATE PARAMETER: progress_units_name.
   * The displayed name of the units of progress associated with
   * the constituent tasks of the task group.
   * Default &quot;sections&quot;
   */
  progressUnitsName: string;
  /**
   * TEMPLATE PARAMETER: show_text.
   * Show the text associated with progress bar, e.g. &quot;8 sections&quot;
   * Default false
   */
  showText: boolean;
  /**
   * TEMPLATE PARAMETER: completed_column_name.
   * The name of the column in the source data list that tracks the completed value of each subtask.
   * If there is no column with this name, the component will look for a column matching completed_field_column_name,
   * and use the corresponding app fields to track the completion status of subtasks.
   * Deafult &quot;completed&quot;
   * */
  completedColumnName: string;
  /**
   * TEMPLATE PARAMETER: completed_field_column_name.
   * The name of the column in the source data list which stores the name of the completed field of each subtask.
   * The app fields corresponding to the values in this column are used to evaluate the completion of subtasks iff the
   * completed_column_name column is not present. In this case, the task progress bar will not update without a page reload.
   * Deafult &quot;completed_field&quot;
   * */
  completedFieldColumnName: string;
}

@Component({
  selector: &quot;plh-task-progress-bar&quot;,
  templateUrl: &quot;./task-progress-bar.component.html&quot;,
  styleUrls: [&quot;./task-progress-bar.component.scss&quot;],
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class TmplTaskProgressBarComponent
  extends TemplateBaseComponent
  implements OnInit, OnDestroy
{
  @Input() dataListName: string | null;
  @Input() completedField: string | null;
  @Input() highlighted: boolean | null;
  @Input() progressStatus: IProgressStatus;
  @Input() progressUnitsName: string;
  @Input() showText: boolean;
  @Output() progressStatusChange &#x3D; new EventEmitter&lt;IProgressStatus&gt;();
  @Output() newlyCompleted &#x3D; new EventEmitter&lt;boolean&gt;();
  params: Partial&lt;ITaskProgressBarParams&gt; &#x3D; {};
  dataRows: any[];
  subtasksTotal: number;
  subtasksCompleted: number;
  standalone: boolean &#x3D; false;
  useDynamicData: boolean;
  private dataQuery$: Subscription;

  constructor(
    private cdr: ChangeDetectorRef,
    private dynamicDataService: DynamicDataService,
    private taskService: TaskService
  ) {
    super();
  }

  async ngOnInit() {
    this.getParams();
    await this.getTaskGroupDataRows();
    this.checkAndSetUseDynamicData();
    if (this.useDynamicData) {
      this.subscribeToData();
    } else {
      this.evaluateTaskGroupData();
    }
  }

  getParams() {
    // If component is being explicitly instantiated from a template, get the params from the template row
    if (this._row) {
      this.standalone &#x3D; true;
      this.params.dataListName &#x3D; getStringParamFromTemplateRow(this._row, &quot;task_group_data&quot;, null);
      this.params.completedField &#x3D; getStringParamFromTemplateRow(
        this._row,
        &quot;completed_field&quot;,
        null
      );
      this.params.progressUnitsName &#x3D; getStringParamFromTemplateRow(
        this._row,
        &quot;progress_units_name&quot;,
        &quot;sections&quot;
      );
      this.params.showText &#x3D; getBooleanParamFromTemplateRow(this._row, &quot;show_text&quot;, false);
      this.params.completedColumnName &#x3D; getStringParamFromTemplateRow(
        this._row,
        &quot;completed_column_name&quot;,
        &quot;completed&quot;
      );
      this.params.completedFieldColumnName &#x3D; getStringParamFromTemplateRow(
        this._row,
        &quot;completed_field_column_name&quot;,
        &quot;completed_field&quot;
      );
    }
    // If component is being instantiated by a parent component (e.g. task-card), use Input() values for params.
    else {
      this.params.dataListName &#x3D; this.dataListName;
      this.params.completedField &#x3D; this.completedField;
      this.params.progressUnitsName &#x3D; this.progressUnitsName;
      this.params.showText &#x3D; this.showText;
      this.params.completedColumnName &#x3D; &quot;completed&quot;;
      this.params.completedFieldColumnName &#x3D; &quot;completed_field&quot;;
    }
  }

  get progressPercentage() {
    return (this.subtasksCompleted / this.subtasksTotal) * 100;
  }

  private async getTaskGroupDataRows() {
    await this.taskService.ready();
    this.dataRows &#x3D; await this.taskService.getTaskGroupDataRows(this.params.dataListName);
  }

  private checkAndSetUseDynamicData() {
    this.useDynamicData &#x3D; this.dataRows?.[0]?.hasOwnProperty(this.params.completedColumnName);
  }

  private async evaluateTaskGroupData() {
    const previousProgressStatus &#x3D; this.progressStatus;
    const { subtasksTotal, subtasksCompleted, progressStatus, newlyCompleted } &#x3D;
      await this.taskService.evaluateTaskGroupData(this.dataRows, {
        completedColumnName: this.params.completedColumnName,
        completedField: this.params.completedField,
        completedFieldColumnName: this.params.completedFieldColumnName,
        dataListName: this.params.dataListName,
        useDynamicData: this.useDynamicData,
      });
    this.progressStatus &#x3D; progressStatus;
    this.subtasksCompleted &#x3D; subtasksCompleted;
    this.subtasksTotal &#x3D; subtasksTotal;

    if (previousProgressStatus !&#x3D;&#x3D; this.progressStatus)
      this.progressStatusChange.emit(this.progressStatus);
    if (newlyCompleted) this.newlyCompleted.emit(true);

    this.cdr.markForCheck();
  }

  // Adapted from data-items component
  private async subscribeToData() {
    if (this.dataQuery$) {
      this.dataQuery$.unsubscribe();
    }
    if (this.params.dataListName) {
      await this.dynamicDataService.ready();
      const query &#x3D; await this.dynamicDataService.query$(&quot;data_list&quot;, this.params.dataListName);
      this.dataQuery$ &#x3D; query.pipe(debounceTime(50)).subscribe(async (data) &#x3D;&gt; {
        this.dataRows &#x3D; data;
        await this.evaluateTaskGroupData();
      });
    }
  }

  ngOnDestroy() {
    if (this.dataQuery$) {
      this.dataQuery$.unsubscribe();
    }
  }
}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'ITaskProgressBarParams.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
